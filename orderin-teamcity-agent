FROM jetbrains/teamcity-agent:latest

# Install AWS CLI 
RUN apt-get update 
RUN apt-get -y install python-setuptools && easy_install pip
RUN pip install awscli

# Install GitVersion.Portable
RUN apt-get -y install tzdata
RUN apt-get -y install wget
RUN apt-get -y install mono-complete
RUN apt-get -y install libcurl3
RUN wget https://github.com/GitTools/GitVersion/releases/download/v4.0.0-beta.12/GitVersion_4.0.0-beta0012.zip
RUN unzip GitVersion_4.0.0-beta0012.zip -d GitVersion
RUN cd GitVersion
RUN echo "mono /GitVersion/GitVersion.exe \"\$@\"" >> gitversion
RUN ln -s $(pwd)/gitversion /usr/local/bin/gitversion
RUN chmod 777 $(pwd)/gitversion

# Clean up
RUN rm -rf /tmp/* \
    && apt-get clean
